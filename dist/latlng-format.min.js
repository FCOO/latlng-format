!function(a,b,c,d){"use strict";function e(a){var b={};return b.hemisphere=a>=0?1:-1,a=Math.abs(a),b.degrees=Math.floor(a),b.degreesDecimal=Math.min(9999,Math.round(1e4*(a-b.degrees))),a=60*a%60,b.minutes=Math.floor(a),b.minutesDecimal=Math.min(999,Math.round(1e3*(a-b.minutes))),a=60*a%60,b.seconds=Math.floor(a),b.secondsDecimal=Math.min(9,Math.floor(10*(a-b.seconds))),b}function f(a){this.options={decimalSeparator:b.LATLNGFORMAT_DEFAULTDECIMALSEPARATOR,degreeChar:"&#176;"},this.setFormat(a)}b.LATLNGFORMAT_DMSS=0,b.LATLNGFORMAT_DMM=1,b.LATLNGFORMAT_DD=2;var g=1.1;g=g.toLocaleString(),b.LATLNGFORMAT_DEFAULTDECIMALSEPARATOR=g.indexOf(".")>-1?".":g.indexOf(",")>-1?",":".",b.LatLngFormat=f,b.LatLngFormat.prototype={setFormat:function(a){this.options.formatId=a,this._updateFormat()},setDecimalSeparator:function(a){this.options.decimalSeparator=a,this._updateFormat()},valid:function(a){return Array.isArray(a)?[this.validLat(a[0]),this.validLng(a[1])]:[]},validLat:function(a){return this._valid(0,a)},validLng:function(a){return this._valid(1,a)},textToDegrees:function(a){return Array.isArray(a)?[this.textToDegreesLat(a[0]),this.textToDegreesLng(a[1])]:[]},textToDegreesLat:function(a){return this._textToDegrees(0,a)},textToDegreesLng:function(a){return this._textToDegrees(1,a)},asText:function(a,b){return Array.isArray(a)?[this.asTextLat(a[0],b),this.asTextLng(a[1],b)]:[]},asTextLat:function(a,b){return this._asText(0,a,b)},asTextLng:function(a,b){return this._asText(1,a,b)},convert:function(a,b){return Array.isArray(a)?[this.convertLat(a[0],b),this.convertLng(a[1],b)]:[]},convertLat:function(a,b){return this._convert(0,a,b)},convertLng:function(a,b){return this._convert(1,a,b)},_valid:function(a,b){return new RegExp("^(?:"+this.options.regexp[a]+")$").test(b)},_textToDegrees:function(a,b){function c(a){var b=a.toString().length;return a/Math.pow(10,b)}if(b=b.toUpperCase().trim(),""===b||!this._valid(a,b))return null;var d=1;(b.indexOf("S")>-1||b.indexOf("W")>-1)&&(d=-1);var e,f,g=b.split(/\D/),h=0,i=0;for(e=0;e<g.length;e++)if(f=parseInt(g[e]),!isNaN(f)){switch(this.options.convertMask[i]){case"DDD":h+=f;break;case"MM":h+=f/60;break;case"mmm":h+=c(f)/60;break;case"s":h+=c(f)/3600;break;case"SS":h+=f/3600;break;case"dddd":h+=c(f)}if(i++,i>=this.options.convertMask.length)break}return d*h},_asText:function(a,b,c){function d(a,b){for(var c=""+a;c.length<b;)c="0"+c;return c}function f(a,b){for(var c=""+a;c.length<b;)c+="0";return c}if("number"!=typeof b)return"";var g=e(b),h=(c?this.options.editMask:this.options.displayMask).replace("H",a?1==g.hemisphere?"E":"W":1==g.hemisphere?"N":"S");return h=h.replace(/DDD/,g.degrees),h=h.replace(/dddd/,f(g.degreesDecimal,4)),h=h.replace(/MM/,d(g.minutes,2)),h=h.replace(/mmm/,f(g.minutesDecimal,3)),h=h.replace(/SS/,d(g.seconds,2)),h=h.replace(/s/,d(g.secondsDecimal,1))},_convert:function(a,b,c){if(c&&c._valid(a,b)){var d=c._textToDegrees(a,b);return this._asText(a,d,!0)}return b},_updateFormat:function(){var c={anySpace:"\\s*",hemisphereLat:"([nNsS])?",hemisphereLong:"([eEwW])?",DD:"((0?[0-9])|[1-8][0-9])",DDD:"((\\d?\\d)|1[0-7][0-9])",MM:"\\s((0?[0-9])|[1-5][0-9])"};c.SS=c.MM,c.seperator=c.anySpace+"[\\s\\.,]"+c.anySpace,c.dddd="("+c.seperator+"\\d{1,4})?",c.MMmmm="("+c.MM+"("+c.seperator+"\\d{1,3})?)?",c.MMSSs="("+c.MM+"("+c.SS+"("+c.seperator+"\\d{1,1})?)?)?";var d=this.options.decimalSeparator,e=this.options.degreeChar,f={};switch(this.options.formatId){case b.LATLNGFORMAT_DMSS:f={displayMask:"DDD"+e+"MM'SS"+d+'s"H',editMask:"DDD MM SS"+d+"sH",convertMask:["DDD","MM","SS","s"],regexp:[c.anySpace+"(90|"+c.DD+c.anySpace+c.MMSSs+")"+c.anySpace+c.hemisphereLat+c.anySpace,c.anySpace+"(180|"+c.DDD+c.anySpace+c.MMSSs+")"+c.anySpace+c.hemisphereLong+c.anySpace],placeholder:["89 59 59"+b.latLngFormat.decimalSeparator+"9N","179 59 59"+b.latLngFormat.decimalSeparator+"9E"]};break;case b.LATLNGFORMAT_DMM:f={displayMask:"DDD"+e+"MM"+d+"mmm'H",editMask:"DDD MM"+d+"mmmH",convertMask:["DDD","MM","mmm"],regexp:[c.anySpace+"(90|"+c.DD+c.anySpace+c.MMmmm+")"+c.anySpace+c.hemisphereLat+c.anySpace,c.anySpace+"(180|"+c.DDD+c.anySpace+c.MMmmm+")"+c.anySpace+c.hemisphereLong+c.anySpace],placeholder:["89 59"+b.latLngFormat.decimalSeparator+"999N","179 59"+b.latLngFormat.decimalSeparator+"999E"]};break;case b.LATLNGFORMAT_DD:f={displayMask:"DDD"+d+"dddd"+e+"H",editMask:"DDD"+d+"ddddH",convertMask:["DDD","dddd"],regexp:[c.anySpace+"(90|"+c.DD+c.anySpace+c.dddd+")"+c.anySpace+c.hemisphereLat+c.anySpace,c.anySpace+"(180|"+c.DDD+c.anySpace+c.dddd+")"+c.anySpace+c.hemisphereLong+c.anySpace],placeholder:["89.9999N","179.9999E"]}}a.extend(this.options,f)}}}(jQuery,this,document);